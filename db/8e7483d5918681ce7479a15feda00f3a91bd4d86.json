{
    "item": {
        "attr": {
            "a": {
                "content": "<div class=\"sourceCode\" id=\"cb1\"><pre\nclass=\"sourceCode haskell\"><code class=\"sourceCode haskell\"><span id=\"cb1-1\"><a href=\"#cb1-1\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ot\">{-# LANGUAGE TypeFamilies #-}</span></span>\n<span id=\"cb1-2\"><a href=\"#cb1-2\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-3\"><a href=\"#cb1-3\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"kw\">import</span> <span class=\"dt\">Data.Functor</span></span>\n<span id=\"cb1-4\"><a href=\"#cb1-4\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"kw\">import</span> <span class=\"dt\">Data.Functor.Contravariant</span></span>\n<span id=\"cb1-5\"><a href=\"#cb1-5\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-6\"><a href=\"#cb1-6\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"kw\">class</span> <span class=\"dt\">Representable</span> f <span class=\"kw\">where</span></span>\n<span id=\"cb1-7\"><a href=\"#cb1-7\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">type</span> <span class=\"dt\">Rep</span><span class=\"ot\"> f ::</span> <span class=\"op\">*</span></span>\n<span id=\"cb1-8\"><a href=\"#cb1-8\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ot\">    tabulate ::</span> (<span class=\"dt\">Rep</span> f <span class=\"ot\">-&gt;</span> x) <span class=\"ot\">-&gt;</span> f x </span>\n<span id=\"cb1-9\"><a href=\"#cb1-9\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ot\">    index ::</span> f x <span class=\"ot\">-&gt;</span> <span class=\"dt\">Rep</span> f <span class=\"ot\">-&gt;</span> x</span>\n<span id=\"cb1-10\"><a href=\"#cb1-10\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-11\"><a href=\"#cb1-11\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"kw\">data</span> <span class=\"dt\">Stream</span> x <span class=\"ot\">=</span> <span class=\"dt\">Cons</span> x (<span class=\"dt\">Stream</span> x)</span>\n<span id=\"cb1-12\"><a href=\"#cb1-12\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-13\"><a href=\"#cb1-13\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"kw\">instance</span> <span class=\"dt\">Representable</span> <span class=\"dt\">Stream</span> <span class=\"kw\">where</span></span>\n<span id=\"cb1-14\"><a href=\"#cb1-14\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"kw\">type</span> <span class=\"dt\">Rep</span> <span class=\"dt\">Stream</span> <span class=\"ot\">=</span> <span class=\"dt\">Int</span></span>\n<span id=\"cb1-15\"><a href=\"#cb1-15\" aria-hidden=\"true\" tabindex=\"-1\"></a>    tabulate f <span class=\"ot\">=</span> <span class=\"dt\">Cons</span> (f <span class=\"dv\">0</span>) (tabulate (f <span class=\"op\">.</span> (<span class=\"op\">+</span><span class=\"dv\">1</span>)))</span>\n<span id=\"cb1-16\"><a href=\"#cb1-16\" aria-hidden=\"true\" tabindex=\"-1\"></a>    <span class=\"fu\">index</span> (<span class=\"dt\">Cons</span> b bs) n <span class=\"ot\">=</span> <span class=\"kw\">if</span> n <span class=\"op\">==</span> <span class=\"dv\">0</span> <span class=\"kw\">then</span> b <span class=\"kw\">else</span> <span class=\"fu\">index</span> bs (n <span class=\"op\">-</span> <span class=\"dv\">1</span>)</span>\n<span id=\"cb1-17\"><a href=\"#cb1-17\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-18\"><a href=\"#cb1-18\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ot\">indexStream ::</span> <span class=\"dt\">Stream</span> x <span class=\"ot\">-&gt;</span> <span class=\"dt\">Int</span> <span class=\"ot\">-&gt;</span> x</span>\n<span id=\"cb1-19\"><a href=\"#cb1-19\" aria-hidden=\"true\" tabindex=\"-1\"></a>indexStream <span class=\"ot\">=</span> <span class=\"fu\">index</span></span>\n<span id=\"cb1-20\"><a href=\"#cb1-20\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ot\">squared ::</span> <span class=\"dt\">Int</span> <span class=\"ot\">-&gt;</span> <span class=\"dt\">Int</span></span>\n<span id=\"cb1-21\"><a href=\"#cb1-21\" aria-hidden=\"true\" tabindex=\"-1\"></a>squared <span class=\"ot\">=</span> indexStream (tabulate (<span class=\"op\">^</span><span class=\"dv\">2</span>))</span>\n<span id=\"cb1-22\"><a href=\"#cb1-22\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-23\"><a href=\"#cb1-23\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ot\">memoize ::</span> (<span class=\"dt\">Int</span> <span class=\"ot\">-&gt;</span> a) <span class=\"ot\">-&gt;</span> (<span class=\"dt\">Int</span> <span class=\"ot\">-&gt;</span> a)</span>\n<span id=\"cb1-24\"><a href=\"#cb1-24\" aria-hidden=\"true\" tabindex=\"-1\"></a>memoize f <span class=\"ot\">=</span> (<span class=\"fu\">map</span> f [<span class=\"dv\">0</span> <span class=\"op\">..</span>] <span class=\"op\">!!</span>)</span>\n<span id=\"cb1-25\"><a href=\"#cb1-25\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-26\"><a href=\"#cb1-26\" aria-hidden=\"true\" tabindex=\"-1\"></a>sqMemo <span class=\"ot\">=</span> memoize squared</span>\n<span id=\"cb1-27\"><a href=\"#cb1-27\" aria-hidden=\"true\" tabindex=\"-1\"></a></span>\n<span id=\"cb1-28\"><a href=\"#cb1-28\" aria-hidden=\"true\" tabindex=\"-1\"></a><span class=\"ot\">main ::</span> <span class=\"dt\">IO</span> ()</span>\n<span id=\"cb1-29\"><a href=\"#cb1-29\" aria-hidden=\"true\" tabindex=\"-1\"></a>main <span class=\"ot\">=</span> <span class=\"fu\">print</span> <span class=\"op\">$</span> sqMemo <span class=\"dv\">10</span></span></code></pre></div>",
                "posixTime": 1678612923
            },
            "q": {
                "content": "<p>Using Stream representation, memoize a function that squares its\nargument.</p>",
                "posixTime": 1678612923
            }
        },
        "numAnswer": 1,
        "sha1": "8e7483d5918681ce7479a15feda00f3a91bd4d86",
        "title": "4"
    },
    "kids": [],
    "parentSha1": "fb06b58134f8a660caa1d5683f15857e2b7f20ad",
    "path": "answers-db/books/Category Theory For Programmers/14. Representable Functors/4"
}